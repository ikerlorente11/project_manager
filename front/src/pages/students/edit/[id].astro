---
import Layout from "../../../layouts/Layout.astro";
import StudentForm from "../../../components/StudentForm.astro";
import Header from "../../../components/Header.astro";
import Back from "../../../components/Back.astro";

// Habilitar Server-Side Rendering (SSR)
export const prerender = false;

const { id } = Astro.params; // Obtener ID de la URL

let student = null;

import { SERVER_API_BASE_URL, BASE_URL } from "astro:env/server";

try {
    const response = await fetch(`${SERVER_API_BASE_URL}students?id=${id}`);
    if (response.ok) {
        student = await response.json();
    } else {
        console.error("Error: Student not found");
    }
} catch (error) {
    console.error("Error fetching student:", error);
}
---

<Layout>
    <Back url=`${BASE_URL || "/"}students/${id}` />
    <Header name={student.name} price={student.price} />
    <StudentForm student={student} />
</Layout>
<style>
    .back-button {
        position: absolute;
        color: var(--color-primary);
    }

    .back-button svg {
        margin-top: 0.5rem;
    }

    .student-details {
        padding: 0.5rem 2rem;
        text-align: center;
    }

    .student-details h1 {
        margin: 0;
        text-transform: capitalize;
        text-align: end;
    }
</style>
